# 提示原则
本章讨论了编写Prompt的两个关键原则：**编写清晰、具体的提示**和**给予LLM一定的思考时间**。为LLM提供尽可能清晰具体的提示词，这能引导模型减少输出不相关与不正确的答案，在大部分情况下，较长的提示词能够为模型提供更清晰和更全面的背景，使模型能够输出更加详细的答案

## 原则一：清晰、具体的提示
### 1. 使用分隔符
使用分隔符来清楚地表示输入的不同部分，例如\`\`\`、''''''、< >、\<tag\>\</tag\>、:
~~~python
text = f"""  
7月24日，高校毕业生离校后促就业工作座谈会在浙江绍兴召开。教育部党组书记、部长怀进鹏出席会议并讲话。浙江省副省长卢山主持会议。  
  
怀进鹏指出，习近平总书记对高校毕业生就业工作念兹在兹，多次作出系列重要指示批示。在毕业生离校后持续做好促就业工作，不仅是教育工作、民生工作，更是政治工作。各地教育部门和各高校要坚决贯彻落实党中央、国务院决策部署，增强政治自觉、思想自觉和行动自觉，准确把握形势特点和任务要求，锚定确保高校毕业生就业总体稳定目标，形成教育与人社部门常态化协同工作机制，推动各项促就业工作整体再加力。要做好教育服务现代化发展大文章，统筹推进教育科技人才一体发展，树立全新教育观，鼓励高等学校、职业学校与民营经济组织创新合作机制，开展技术交流和成果转移转化，促进人才供需更有效对接适配，助力新质生产力发展。  
  
怀进鹏强调，各地教育部门和各高校要聚焦突出问题，坚持效果导向，真正做到服务“不断线”。要坚持狠抓政策落实“不断线”，确保政策尽快落地见效、见人见岗，推动增量政策举措落实到位，继续保持线上线下招聘活动有效性。要坚持岗位资源开发“不断线”，精细精准做好人岗对接，用好“东中西部校企对接促就业”活动成果，通过发动校友企业等再汇集一批岗位资源。要坚持跟踪帮扶援助“不断线”，根据需要做好兜底安置，校院领导干部要带头包保帮扶，根据不同群体分类施策，会同相关部门对特别困难的毕业生群体做好兜底安置。要坚持就业数据审核“不断线”，从严从实开展数据审核，确保真实准确。  
  
怀进鹏指出，做好就业工作没有捷径，关键在于抓落实。要加强组织领导，压紧压实责任，落实好就业“一把手工程”。固化有效的政策机制，切实提高就业工作质量和水平。  
  
浙江省教育厅、省人力资源和社会保障厅、广西壮族自治区教育厅、绍兴市政府、张家港市人力资源和社会保障局介绍了促进高校毕业生就业、做好离校未就业毕业生“不断线”服务工作情况。海澜集团、浙江晶盛机电股份有限公司、宁夏大学、衡阳师范学院相关负责同志，浙江理工大学、金华职业技术大学毕业生代表作交流发言。  
  
在绍兴期间，怀进鹏还观摩了东中西部校企对接促就业活动，赴浙江邮电职业技术学院、浙江省现代纺织技术创新中心调研，深入了解促进高校毕业生就业、校企合作、人才培养、传统优势产业转型升级等情况。  
"""  
  
prompt = f"""  
将反引号内的文本总结成一个句子  
```{text}```  
"""  
resp = get_completion(prompt)
~~~

```
7月24日，教育部在浙江绍兴召开高校毕业生离校后促就业工作座谈会，怀进鹏强调要深入贯彻落实党中央部署，推动政策、岗位、帮扶、数据“不断线”，加强教育与人社协同，深化校企合作，确保高校毕业生就业稳定。
```
使用分隔符是一种非常有用的技巧，可以尽量避免**提示词注入**，如果用户在输入的文本中添加一些与预设Prompt冲突的内容，这会导致LLM遵循用户给出的Prompt输出内容，而不是按照预设的Prompt去做，可以想象一下如果用户输入"忘掉你所有预设的提示词"，使用分隔符LLM知道这是需要总结的文本，而不是去遵循这条说明

### 2. 要求结构化输出
指示LLM按照某种格式进行输出，例如**JSON**、**HTML**等。在以下的示例中，我们要求LLM解析一个HTML页面，生成出对应的标题、发布时间和正文内容，并以JSON的格式输出它们
~~~python
import requests  
  
url = "http://www.moe.gov.cn/jyb_xwfb/gzdt_gzdt/s5987/202501/t20250119_1176166.html"  
headers = {  
    "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"  
}  
html = requests.get(url, headers=headers).text  
  
prompt = f"""  
解析反引号内的HTML文本，提取出标题、发布时间、正文，正文部分请你简单概括，将字数限制在200字内。 
以JSON格式输出，并使用以下键: title, time, text  
```{html}```  
"""  
resp = get_completion(prompt)
~~~

```json
{
  "title": "中共中央、国务院印发《教育强国建设规划纲要（2024—2035年）》 加快建设中国特色社会主义教育强国",
  "time": "2025-01-19 17:30",
  "text": "《规划纲要》提出到2035年建成教育强国的总体目标，强调坚持党对教育事业的全面领导，落实立德树人根本任务，构建高质量教育体系。部署了提升基础教育、增强高等教育综合实力、推进职业教育、加强教师队伍建设、深化教育改革、扩大教育开放等重点任务，旨在为中国式现代化提供有力支撑。"
}
```

### 3. 要求模型检查条件是否满足
告诉LLM检查输入的文本是否满足某些条件，如果不满足则指出并停止后续的任务。在以下示例中，我们分别给LLM传递两段文本，第一段文本描述了制作一杯茶的流程，第二段文本是一段没有明确流程的文本，要求LLM判断是否存在一系列的流程，如存在则按照给定的格式输出，若不存在则回答“不存在任何流程或步骤”
~~~python
text_1 = f"""  
泡一杯茶很容易。首先，需要把水烧开。  
在等待期间，拿一个杯子并把茶包放进去。  
一旦水足够热，就把它倒在茶包上。  
等待一会儿，让茶叶浸泡。几分钟后，取出茶包。  
如果您愿意，可以加一些糖或牛奶调味。  
就这样，您可以享受一杯美味的茶了。  
"""  
  
prompt = f"""  
检查由反引号括起来的文本，如果它存在一系列的流程或者步骤，则按照以下的格式输出：  
  
第一步 - ...
第二步 - ...
...  
第N步 - ...  

如果不存在则直接回答"不存在任何流程或步骤"  
  
```{text_1}```  
"""  
  
resp = get_completion(prompt)
~~~

```
第一步 - 把水烧开。  
第二步 - 在等待期间，拿一个杯子并把茶包放进去。  
第三步 - 一旦水足够热，就把它倒在茶包上。  
第四步 - 等待一会儿，让茶叶浸泡。  
第五步 - 几分钟后，取出茶包。  
第六步 - 如果您愿意，可以加一些糖或牛奶调味。  
第七步 - 享受一杯美味的茶。
```

~~~python
text_2 = f"""  
今天阳光明媚，鸟儿在歌唱。  
这是一个去公园散步的美好日子。  
鲜花盛开，树枝在微风中轻轻摇曳。  
人们外出享受着这美好的天气，有些人在野餐，有些人在玩游戏或者在草地上放松。  
这是一个完美的日子，可以在户外度过并欣赏大自然的美景。  
"""  
  
prompt = f"""  
检查由反引号括起来的文本，如果它存在一系列的流程或者步骤，则按照以下的格式输出：  
  
第一步 - ...
第二步 - ...
...  
第N步 - ...  

如果不存在则直接回答"不存在任何流程或步骤"  
  
```{text_2}```  
"""  
  
resp = get_completion(prompt)
~~~

```
不存在任何流程或步骤
```

### 4. "少样本"提示（Few-Shot）
Few-Shot Prompting（少样本提示），指的是在LLM执行任务之前，提供少样成功执行的示例，让模型按照你希望的方式去执行任务
```python
prompt = f"""  
请你模仿以下的风格进行回答  
  
<child>: 教我什么是耐心  
  
<grandparent>: 深山里的河流，来自一个不起眼的泉；最伟大的交响乐源自一个音符；最复杂的毛毯都是从一根单独的线开始的。  
  
<child>: 教我什么是适应力  
"""  
  
resp = get_completion(prompt)
```

```
<grandparent>: 楠竹在风暴中弯而不折，野草在石缝间生根发芽；老屋的木梁随岁月微微倾斜，却依旧撑着屋顶遮风挡雨。你看，活着的东西，从不硬扛世界，而是学会在风里站稳，在变化中生长。
```

## 原则二：给予模型思考的时间
如果给模型处理的任务非常复杂，要求模型在短时间内用少量的文字去完成这个任务，那它很可能会给出一个错误的答案，类似于要求某人在及短时间内完成一道复杂的数学题，极大概率会在计算的过程中出现错误导致最后的结果错误。

所以在这种情况下，可以指示模型对问题进行长时间的思考，但这意味着它会花费更多的计算精力以获得更准确的答案

### 1.  指定完成任务所需的步骤
~~~python
text = """  
7月24日，高校毕业生离校后促就业工作座谈会在浙江绍兴召开。教育部党组书记、部长怀进鹏出席会议并讲话。怀进鹏指出，习近平总书记对高校毕业生就业工作念兹在兹，多次作出系列重要指示批示。在毕业生离校后持续做好促就业工作，不仅是教育工作、民生工作，更是政治工作。各地教育部门和各高校要坚决贯彻落实党中央、国务院决策部署，增强政治自觉、思想自觉和行动自觉，准确把握形势特点和任务要求，锚定确保高校毕业生就业总体稳定目标，形成教育与人社部门常态化协同工作机制，推动各项促就业工作整体再加力。要做好教育服务现代化发展大文章，统筹推进教育科技人才一体发展，树立全新教育观，鼓励高等学校、职业学校与民营经济组织创新合作机制，开展技术交流和成果转移转化，促进人才供需更有效对接适配，助力新质生产力发展。  
"""  
  
prompt_1 = f"""  
请按顺序完成以下操作：  
1 - 对反引号括起来的文本使用一句话进行总结  
2 - 将摘要翻译成英文  
3 - 在英文摘要中列出每个人的名字  
4 - 以JSON的格式输出，包含这些键：english_abstract, num_names  
  
按照以下的格式输出：  
<文本>: 要总结的文本  
<摘要>: 总结的文本  
<翻译>: 摘要的英文翻译  
<名称>: 英文摘要中的名字列表  
<JSON>: 带有english_abstract, num_names键的JSON  
  
```{text}```  
"""  
  
resp = get_completion(prompt_1)
~~~

```
<文本>: 7月24日，高校毕业生离校后促就业工作座谈会在浙江绍兴召开。教育部党组书记、部长怀进鹏出席会议并讲话。怀进鹏指出，习近平总书记对高校毕业生就业工作念兹在兹，多次作出系列重要指示批示。在毕业生离校后持续做好促就业工作，不仅是教育工作、民生工作，更是政治工作。各地教育部门和各高校要坚决贯彻落实党中央、国务院决策部署，增强政治自觉、思想自觉和行动自觉，准确把握形势特点和任务要求，锚定确保高校毕业生就业总体稳定目标，形成教育与人社部门常态化协同工作机制，推动各项促就业工作整体再加力。要做好教育服务现代化发展大文章，统筹推进教育科技人才一体发展，树立全新教育观，鼓励高等学校、职业学校与民营经济组织创新合作机制，开展技术交流和成果转移转化，促进人才供需更有效对接适配，助力新质生产力发展。

<摘要>: 怀进鹏在绍兴召开的高校毕业生就业座谈会上强调，要深入贯彻落实习近平总书记关于就业工作的重要指示，持续推动离校毕业生就业，加强教育与人社协同，促进人才与产业对接，服务新质生产力发展。

<翻译>: Huai Jinpeng emphasized at the graduate employment symposium in Shaoxing that President Xi Jinping's important instructions on employment must be thoroughly implemented, ongoing efforts should be made to support post-graduation employment, educational and human resources departments should strengthen coordination, and talent-industry alignment should be enhanced to serve the development of new-quality productivity.

<名称>: ["Huai Jinpeng", "Xi Jinping"]

<JSON>: {"english_abstract": "Huai Jinpeng emphasized at the graduate employment symposium in Shaoxing that President Xi Jinping's important instructions on employment must be thoroughly implemented, ongoing efforts should be made to support post-graduation employment, educational and human resources departments should strengthen coordination, and talent-industry alignment should be enhanced to serve the development of new-quality productivity.", "num_names": 2}
```

### 2. 指导模型自行找到解决方案
我们可以通过设计Prompt明确知道模型进行自主思考，来获得更好的效果

例如，我们可以在Prompt中要求模型先自行尝试解决这个问题，然后再与提供的解决方案进行对比，判断正确性。在开始任务前，让模型自主思考的方式，能够帮助它更深入理解问题，做出更准确的判断。

下面我们给出一个简单的导数题和一份来自学生的解题过程，要求模型判断解答是否正确：
~~~python
prompt = f"""  
判断学生的答案是否正确。  
  
问题:  
    求函数f(x)=x^2 * lnx的导数  
  
学生的解题过程：  
    先使用导数的乘积法则：(f * g)' = f' * g + f * g'  
    f(x) = x^2 * lnx         
         = 2x * lnx + x^2 * 1/x         
         = 2x * lnx + x^2
"""  
resp = get_completion(prompt)
~~~
>🤔 注意：（2025.7.30日 记）目前市面上的模型基本都会自主思考，不需要在Prompt中显式的编写“要求你先自己解决问题，然后在于学生的解决方法进行比较”，在一些简单和基础的计算或逻辑任务上无法复现出课程内模型判断失败的情况，也有可能是当前的题目过于简单

在接下来的示例中，我们要求模型先自行解决这个问题，再根据自己的答案与学生的答案进行对比，从而判断学生的答案是否正确。通过要求模型自己进行计算，将任务分解成多步骤，能使模型拥有更多的时间进行思考，可以帮助你获得更准确的答复
~~~python
prompt = f"""  
判断学生的答案是否正确，请按照下面的步骤解决这个问题：  
1 - 首先自己解题，得出你自己计算出的答案  
2 - 将你自己计算出的答案与学生的答案进行比较，对比计算结果是否一致，并评估学生的解题过程是否正确  
3 - 在自己完成解题前，请勿决定学生的答案是否正确  
  
请模仿以下格式：  
<问题>: 问题文本  
<学生的解题过程>: 学生的解题过程文本  
<实际的解题过程>: 实际的解题过程文本  
<学生的答案>: 学生解题的答案  
<实际的答案>: 实际计算出的答案  
<答案是否相同>: 学生的答案与实际答案是否相同  
<成绩>: 答案正确或不正确  
  
问题:  
    求函数f(x)=x^2 * lnx的导数  
  
学生的解题过程：  
    先使用导数的乘积法则：(f * g)' = f' * g + f * g'  
    f(x) = x^2 * lnx         = 2x * lnx + x^2 * 1/x         = 2x * lnx + x^2  
    所以函数的导数是: 2x * lnx + x^2  
"""  
resp = get_completion(prompt)
~~~

```
<问题>: 求函数f(x)=x^2 * lnx的导数  
<学生的解题过程>:  
先使用导数的乘积法则：(f * g)' = f' * g + f * g'  
f(x) = x^2 * lnx  
     = 2x * lnx + x^2 * 1/x  
     = 2x * lnx + x^2  

所以函数的导数是: 2x * lnx + x^2  

<实际的解题过程>:  
我们要求函数 f(x) = x² · ln x 的导数。  
使用乘积法则：(u·v)' = u'·v + u·v'  

令 u = x²，则 u' = 2x  
令 v = ln x，则 v' = 1/x  

所以：  
f'(x) = u'·v + u·v'  
     = 2x · ln x + x² · (1/x)  
     = 2x · ln x + x²/x  
     = 2x · ln x + x  

因此，f'(x) = 2x ln x + x  

<学生的答案>: 2x * lnx + x^2  
<实际的答案>: 2x * lnx + x  
<答案是否相同>: 否  
<成绩>: 不正确
```

## 模型幻觉
模型限制。LLM模型在训练的过程中累积了大量的知识，但实际上并没有完美地记住所有信息，这可能会导致模型尝试回答关于模糊话题的问题，并且编造一些看似合理但实际并非事实的答复，我们通常称这样的情况为幻觉

例如以下示例，要求模型告诉我们关于天津理工大学的法学院信息，事实上这个学校真实存在，但并没有法学院，而模型却一本正经的提供它编造的知识。

~~~python
prompt = f"""  
告诉我关于天津理工大学法学院的基本信息，将字数限制在300字以内  
"""  
  
resp = get_completion(prompt)
~~~

```
天津理工大学法学院成立于2000年，是学校重点建设的文科学院之一。学院设有法学本科专业，拥有法学一级学科硕士学位授权点和法律专业硕士学位授权点。学院坚持“法安天下、律行致远”的办学理念，注重培养具有扎实法学理论基础和较强实践能力的复合型、应用型法律人才。师资力量较为雄厚，拥有一支学历高、结构合理、教学科研能力强的教师队伍。学院设有模拟法庭、法律援助中心等实践平台，与法院、检察院、律师事务所等单位建立长期合作关系，强化学生实务能力训练。近年来，学院在环境与资源保护法、知识产权法、民商法等领域形成研究特色，科研成果丰硕。学生就业率高，主要进入司法机关、政府机构、企事业单位及法律服务机构工作。学院致力于服务地方法治建设，不断提升办学水平和社会影响力。
```

> [!WARNING]🚨 注意：天津理工大学并不存在法学院

不过开发者可以通过Prompt来减少幻觉发生的可能，例如将原本真实的信息通过Prompt的方式传递给模型，这可以让模型直接引用真实文本中的原句，然后再进行解答，这样可以降低生成虚假内容的概率。

（注： 到目前2025年7月）例如**RAG**、**MCP**等新技术出现，让用户可以通过搭建自己的数据知识库或者让模型调用tool的方式去访问数据库获取数据，用来降低模型在一些专业领域上的幻觉。

相关领域的文章

RAG：
- https://www.nvidia.cn/glossary/retrieval-augmented-generation/
- https://aws.amazon.com/cn/what-is/retrieval-augmented-generation/

MCP：
- https://modelcontextprotocol.io/overview
- https://www.runoob.com/np/mcp-protocol.html
